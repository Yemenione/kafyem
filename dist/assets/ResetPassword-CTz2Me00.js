import{d as j,l as v,r as o,j as e,B as b}from"./index-BAnfMb-m.js";import{N}from"./Navbar-xjmNP0L7.js";import{I as m}from"./input-udRnJ2sz.js";import"./createLucideIcon-C7dg4ryp.js";import"./shopping-bag-paFp7sNB.js";import"./trash-2-Bit0nVAW.js";import"./search-B02Y57cA.js";const E=()=>{const[u]=j(),c=u.get("token"),f=v(),[n,x]=o.useState(""),[i,h]=o.useState(""),[r,a]=o.useState("idle"),[g,d]=o.useState(""),w=async s=>{if(s.preventDefault(),n!==i){a("error"),d(t("passwords_not_match"));return}a("loading");try{const p=await fetch("https://api.yemenimarket.fr/api/auth/reset-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:c,newPassword:n})});if(!p.ok){const y=await p.json();throw new Error(y.message||"Failed to reset password")}a("success"),setTimeout(()=>f("/login"),3e3)}catch(l){console.error(l),a("error"),d(t("link_expired"))}};return c?e.jsxs("div",{className:"min-h-screen bg-white font-sans",children:[e.jsx(N,{}),e.jsx("div",{className:"flex items-center justify-center py-20 px-4",children:e.jsxs("div",{className:"w-full max-w-md space-y-8",children:[e.jsx("div",{className:"text-center",children:e.jsx("h2",{className:"text-3xl font-serif font-bold text-coffee-dark",children:t("new_password")})}),r==="success"?e.jsx("div",{className:"bg-green-50 p-4 rounded text-green-800 text-center",children:t("password_updated_redirect")}):e.jsxs("form",{className:"mt-8 space-y-6",onSubmit:w,children:[r==="error"&&e.jsx("div",{className:"text-red-500 text-sm text-center",children:g}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"sr-only",children:t("new_password")}),e.jsx(m,{type:"password",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-3 border border-gray-300 placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-coffee focus:border-coffee sm:text-sm",placeholder:t("new_password"),value:n,onChange:s=>x(s.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"sr-only",children:t("confirm_password")}),e.jsx(m,{type:"password",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-3 border border-gray-300 placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-coffee focus:border-coffee sm:text-sm",placeholder:t("confirm_password"),value:i,onChange:s=>h(s.target.value)})]})]}),e.jsx("div",{children:e.jsx(b,{type:"submit",disabled:r==="loading",className:"group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-medium text-white bg-coffee hover:bg-coffee-dark focus:outline-none transition-colors",children:r==="loading"?t("changing"):t("change_password")})})]})]})})]}):e.jsx("div",{className:"p-20 text-center",children:t("invalid_link")})};export{E as default};
