import{r as t,j as e,a as x}from"./index-BAnfMb-m.js";import{I as h}from"./input-udRnJ2sz.js";import{S as p}from"./search-B02Y57cA.js";import{c as f}from"./createLucideIcon-C7dg4ryp.js";import{S as g}from"./shopping-bag-paFp7sNB.js";const j=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],y=f("mail",j),S=()=>{const[l,o]=t.useState([]),[i,c]=t.useState(!0),[a,d]=t.useState("");t.useEffect(()=>{(async()=>{try{const m=await x.get("https://api.yemenimarket.fr/api/admin/customers",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});o(m.data)}catch(r){console.error("Failed to fetch customers",r)}finally{c(!1)}})()},[]);const n=l.filter(s=>(s.first_name+" "+s.last_name).toLowerCase().includes(a.toLowerCase())||s.email.toLowerCase().includes(a.toLowerCase()));return i?e.jsx("div",{className:"p-8 text-center text-gray-500",children:"Loading customers..."}):e.jsxs("div",{className:"p-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-serif font-bold text-coffee-dark",children:"Customer Base"}),e.jsx("p",{className:"text-gray-500",children:"View and manage your registered users."})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-100",children:[e.jsx("div",{className:"p-4 border-b border-gray-50",children:e.jsxs("div",{className:"relative max-w-md",children:[e.jsx(p,{className:"absolute left-3 top-2.5 text-gray-400 w-4 h-4"}),e.jsx(h,{placeholder:"Search by name or email...",className:"pl-10 h-10",value:a,onChange:s=>d(s.target.value)})]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{className:"bg-gray-50 text-gray-600 text-xs uppercase font-bold",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4",children:"Customer"}),e.jsx("th",{className:"px-6 py-4",children:"Registration"}),e.jsx("th",{className:"px-6 py-4",children:"Orders"}),e.jsx("th",{className:"px-6 py-4",children:"Total Spent"}),e.jsx("th",{className:"px-6 py-4",children:"Location"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:n.map(s=>e.jsxs("tr",{className:"hover:bg-gray-50/50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"w-8 h-8 rounded-full bg-gold/10 flex items-center justify-center text-gold font-bold text-xs",children:[s.first_name?.[0],s.last_name?.[0]]}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-bold text-sm text-coffee-dark",children:[s.first_name||"Guest"," ",s.last_name||""]}),e.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-400",children:[e.jsx(y,{size:10})," ",s.email]})]})]})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:new Date(s.created_at).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-1 text-sm font-medium",children:[e.jsx(g,{size:14,className:"text-gray-400"}),s.orderCount]})}),e.jsxs("td",{className:"px-6 py-4 font-bold text-sm text-coffee-dark",children:["$",s.totalSpent.toFixed(2)]}),e.jsxs("td",{className:"px-6 py-4 text-sm text-gray-500 capitalize",children:[s.addresses?.[0]?.city||"N/A",", ",s.addresses?.[0]?.country||"N/A"]})]},s.id))})]})})]})]})};export{S as default};
