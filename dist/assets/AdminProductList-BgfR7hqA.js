import{r as a,l as f,a as o,j as e,B as j,t as i}from"./index-BAnfMb-m.js";import{I as y}from"./input-udRnJ2sz.js";import{P as N,T as v}from"./trash-2-Bit0nVAW.js";import{S as b}from"./search-B02Y57cA.js";import{c as n}from"./createLucideIcon-C7dg4ryp.js";const w=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],k=n("external-link",w);const P=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],L=n("pen",P),A=()=>{const[d,x]=a.useState([]),[h,m]=a.useState(!0),[r,p]=a.useState(""),c=f();a.useEffect(()=>{l()},[]);const l=async()=>{try{const s=localStorage.getItem("token"),t=await o.get(`${API_URL}/api/admin/products`,{headers:{Authorization:`Bearer ${s}`}});x(t.data)}catch(s){console.error("Failed to fetch products",s)}finally{m(!1)}},g=async s=>{if(window.confirm("Are you sure you want to deactivate this product?"))try{const t=localStorage.getItem("token");await o.delete(`${API_URL}/api/admin/products/${s}`,{headers:{Authorization:`Bearer ${t}`}}),l(),i.success("Product deactivated successfully")}catch{i.error("Failed to delete product")}},u=d.filter(s=>s.name.toLowerCase().includes(r.toLowerCase())||s.categories?.name?.toLowerCase().includes(r.toLowerCase()));return h?e.jsx("div",{className:"p-8",children:"Loading products..."}):e.jsxs("div",{className:"p-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-serif font-bold text-coffee-dark",children:"Product Management"}),e.jsx("p",{className:"text-gray-500",children:"Manage your catalog, stock, and pricing."})]}),e.jsxs(j,{onClick:()=>c("/admin/products/new"),className:"bg-gold hover:bg-gold/90 text-coffee-dark font-bold",children:[e.jsx(N,{className:"w-4 h-4 mr-2"})," Add Product"]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-100 overflow-hidden",children:[e.jsx("div",{className:"p-4 border-b border-gray-50 bg-gray-50/50",children:e.jsxs("div",{className:"relative max-w-sm",children:[e.jsx(b,{className:"absolute left-3 top-2.5 text-gray-400 w-4 h-4"}),e.jsx(y,{placeholder:"Search products...",className:"pl-10",value:r,onChange:s=>p(s.target.value)})]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left bg-white",children:[e.jsx("thead",{className:"bg-gray-50 text-gray-600 text-xs uppercase tracking-wider font-bold",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4",children:"Product"}),e.jsx("th",{className:"px-6 py-4",children:"Category"}),e.jsx("th",{className:"px-6 py-4",children:"Price"}),e.jsx("th",{className:"px-6 py-4",children:"Stock"}),e.jsx("th",{className:"px-6 py-4",children:"Status"}),e.jsx("th",{className:"px-6 py-4 text-right",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:u.map(s=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gray-100 rounded overflow-hidden flex-shrink-0",children:e.jsx("img",{src:s.image_url||`https://placehold.co/100x100/D4AF37/FFFFFF?text=${encodeURIComponent(s.name[0])}`,alt:"",className:"w-full h-full object-cover"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-coffee-dark text-sm",children:s.name}),e.jsxs("p",{className:"text-xs text-gray-400",children:["ID: ",s.id]})]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"text-xs bg-coffee-light/20 text-coffee-dark px-2 py-1 rounded",children:s.categories?.name||"Uncategorized"})}),e.jsxs("td",{className:"px-6 py-4 font-medium text-sm",children:["$",parseFloat(s.price).toFixed(2)]}),e.jsx("td",{className:"px-6 py-4 text-sm",children:e.jsx("span",{className:s.stock_quantity<10?"text-red-500 font-bold":"text-gray-600",children:s.stock_quantity})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`text-[10px] uppercase font-bold px-2 py-0.5 rounded-full ${s.is_active?"bg-green-100 text-green-700":"bg-gray-100 text-gray-500"}`,children:s.is_active?"Active":"Inactive"})}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{onClick:()=>window.open(`/products/${s.id}`,"_blank"),className:"p-2 text-gray-400 hover:text-blue-500 transition-colors",title:"View Public",children:e.jsx(k,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>c(`/admin/products/edit/${s.id}`),className:"p-2 text-gray-400 hover:text-gold transition-colors",title:"Edit",children:e.jsx(L,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>g(s.id),className:"p-2 text-gray-400 hover:text-red-500 transition-colors",title:"Deactivate",children:e.jsx(v,{className:"w-4 h-4"})})]})})]},s.id))})]})})]})]})};export{A as default};
