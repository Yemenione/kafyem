import{r as i,j as e,a as d,t as l}from"./index-CXRzGYYB.js";import{c as u}from"./createLucideIcon-DYHEWQHk.js";const g=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],y=u("eye",g),w=()=>{const[o,n]=i.useState([]),[x,p]=i.useState(!0);i.useEffect(()=>{(async()=>{try{const s="https://api.yemenimarket.fr/",a=localStorage.getItem("token"),c=await d.get(`${s}/api/admin/orders`,{headers:{Authorization:`Bearer ${a}`}});n(c.data)}catch(s){console.error(s)}finally{p(!1)}})()},[]);const m=async(t,s)=>{try{const a=localStorage.getItem("token");n(h=>h.map(r=>r.id===t?{...r,status:s}:r)),await d.put(`https://api.yemenimarket.fr//api/admin/orders/${t}/status`,{status:s},{headers:{Authorization:`Bearer ${a}`}}),l.success(`Order status updated to ${s}`)}catch(a){console.error(a),l.error("Failed to update status")}};return x?e.jsx("div",{children:"Loading orders..."}):e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-8",children:"Orders Management"}),e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Order No"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:o.map(t=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap font-medium text-gray-900",children:t.order_number}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-gray-500",children:t.first_name?`${t.first_name} ${t.last_name}`:"Guest"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-gray-500",children:new Date(t.created_at).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("select",{value:t.status,onChange:s=>m(t.id,s.target.value),className:`px-2 py-1 text-xs font-semibold rounded-full border-none focus:ring-0 cursor-pointer ${t.status==="Processing"?"bg-yellow-100 text-yellow-800":t.status==="Shipped"?"bg-blue-100 text-blue-800":t.status==="Delivered"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:[e.jsx("option",{value:"Processing",children:"Processing"}),e.jsx("option",{value:"Shipped",children:"Shipped"}),e.jsx("option",{value:"Delivered",children:"Delivered"}),e.jsx("option",{value:"Cancelled",children:"Cancelled"})]})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-gray-500",children:["$",t.total_amount]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("button",{className:"text-indigo-600 hover:text-indigo-900 flex items-center",children:[e.jsx(y,{size:16,className:"mr-1"})," View"]})})]},t.id))})]})})]})};export{w as default};
