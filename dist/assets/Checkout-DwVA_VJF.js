import{n as Ie,R as f,u as je,b as Le,m as Ue,o as qe,l as Fe,r as C,a as te,j as s,B as oe,t as re}from"./index-CXRzGYYB.js";import{N as We}from"./Navbar-BQicr_yf.js";import{I as A}from"./input-DmEUPcbP.js";import{M as Me,C as $e}from"./map-pin-B9siAJD0.js";import{L as Be}from"./lock-CpjYnK1p.js";import"./createLucideIcon-DYHEWQHk.js";import"./shopping-bag-BIvf1kpX.js";import"./trash-2-BPVosxM9.js";import"./search-ghY-3tdw.js";function Y(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Y=function(e){return typeof e}:Y=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Y(t)}var Se="clover",De=function(e){return e===3?"v3":e},Ee="https://js.stripe.com",Je="".concat(Ee,"/").concat(Se,"/stripe.js"),Ve=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,Ye=/^https:\/\/js\.stripe\.com\/(v3|[a-z]+)\/stripe\.js(\?.*)?$/;var Ge=function(e){return Ve.test(e)||Ye.test(e)},Ke=function(){for(var e=document.querySelectorAll('script[src^="'.concat(Ee,'"]')),r=0;r<e.length;r++){var n=e[r];if(Ge(n.src))return n}return null},de=function(e){var r="",n=document.createElement("script");n.src="".concat(Je).concat(r);var a=document.head||document.body;if(!a)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return a.appendChild(n),n},ze=function(e,r){!e||!e._registerWrapper||e._registerWrapper({name:"stripe-js",version:"8.7.0",startTime:r})},F=null,J=null,V=null,Xe=function(e){return function(r){e(new Error("Failed to load Stripe.js",{cause:r}))}},He=function(e,r){return function(){window.Stripe?e(window.Stripe):r(new Error("Stripe.js not available"))}},Qe=function(e){return F!==null?F:(F=new Promise(function(r,n){if(typeof window>"u"||typeof document>"u"){r(null);return}if(window.Stripe){r(window.Stripe);return}try{var a=Ke();if(!(a&&e)){if(!a)a=de(e);else if(a&&V!==null&&J!==null){var o;a.removeEventListener("load",V),a.removeEventListener("error",J),(o=a.parentNode)===null||o===void 0||o.removeChild(a),a=de(e)}}V=He(r,n),J=Xe(n),a.addEventListener("load",V),a.addEventListener("error",J)}catch(u){n(u);return}}),F.catch(function(r){return F=null,Promise.reject(r)}))},Ze=function(e,r,n){if(e===null)return null;var a=r[0];if(typeof a!="string")throw new Error("Expected publishable key to be of type string, got type ".concat(Y(a)," instead."));var o=a.match(/^pk_test/),u=De(e.version),p=Se;o&&u!==p&&console.warn("Stripe.js@".concat(u," was loaded on the page, but @stripe/stripe-js@").concat("8.7.0"," expected Stripe.js@").concat(p,". This may result in unexpected behavior. For more information, see https://docs.stripe.com/sdks/stripejs-versioning"));var i=e.apply(void 0,r);return ze(i,n),i},W,Ce=!1,Ne=function(){return W||(W=Qe(null).catch(function(e){return W=null,Promise.reject(e)}),W)};Promise.resolve().then(function(){return Ne()}).catch(function(t){Ce||console.warn(t)});var et=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];Ce=!0;var a=Date.now();return Ne().then(function(o){return Ze(o,r,a)})},ne={exports:{}},se,fe;function tt(){if(fe)return se;fe=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return se=t,se}var ae,me;function rt(){if(me)return ae;me=1;var t=tt();function e(){}function r(){}return r.resetWarningCache=e,ae=function(){function n(u,p,i,h,g,m){if(m!==t){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}n.isRequired=n;function a(){return n}var o={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:a,element:n,elementType:n,instanceOf:a,node:n,objectOf:a,oneOf:a,oneOfType:a,shape:a,exact:a,checkPropTypes:r,resetWarningCache:e};return o.PropTypes=o,o},ae}var he;function nt(){return he||(he=1,ne.exports=rt()()),ne.exports}var st=nt();const d=Ie(st);function ye(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function ve(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?ye(Object(r),!0).forEach(function(n){_e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ye(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function G(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?G=function(e){return typeof e}:G=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},G(t)}function _e(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function at(t,e){if(t==null)return{};var r={},n=Object.keys(t),a,o;for(o=0;o<n.length;o++)a=n[o],!(e.indexOf(a)>=0)&&(r[a]=t[a]);return r}function ot(t,e){if(t==null)return{};var r=at(t,e),n,a;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(a=0;a<o.length;a++)n=o[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function we(t,e){return it(t)||ct(t,e)||lt(t,e)||ut()}function it(t){if(Array.isArray(t))return t}function ct(t,e){var r=t&&(typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"]);if(r!=null){var n=[],a=!0,o=!1,u,p;try{for(r=r.call(t);!(a=(u=r.next()).done)&&(n.push(u.value),!(e&&n.length===e));a=!0);}catch(i){o=!0,p=i}finally{try{!a&&r.return!=null&&r.return()}finally{if(o)throw p}}return n}}function lt(t,e){if(t){if(typeof t=="string")return ge(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ge(t,e)}}function ge(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function ut(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var E=function(e,r,n){var a=!!n,o=f.useRef(n);f.useEffect(function(){o.current=n},[n]),f.useEffect(function(){if(!a||!e)return function(){};var u=function(){o.current&&o.current.apply(o,arguments)};return e.on(r,u),function(){e.off(r,u)}},[a,r,e,o])},ie=function(e){var r=f.useRef(e);return f.useEffect(function(){r.current=e},[e]),r.current},I=function(e){return e!==null&&G(e)==="object"},pt=function(e){return I(e)&&typeof e.then=="function"},dt=function(e){return I(e)&&typeof e.elements=="function"&&typeof e.createToken=="function"&&typeof e.createPaymentMethod=="function"&&typeof e.confirmCardPayment=="function"},xe="[object Object]",ft=function t(e,r){if(!I(e)||!I(r))return e===r;var n=Array.isArray(e),a=Array.isArray(r);if(n!==a)return!1;var o=Object.prototype.toString.call(e)===xe,u=Object.prototype.toString.call(r)===xe;if(o!==u)return!1;if(!o&&!n)return e===r;var p=Object.keys(e),i=Object.keys(r);if(p.length!==i.length)return!1;for(var h={},g=0;g<p.length;g+=1)h[p[g]]=!0;for(var m=0;m<i.length;m+=1)h[i[m]]=!0;var l=Object.keys(h);if(l.length!==p.length)return!1;var w=e,R=r,k=function(x){return t(w[x],R[x])};return l.every(k)},Pe=function(e,r,n){return I(e)?Object.keys(e).reduce(function(a,o){var u=!I(r)||!ft(e[o],r[o]);return n.includes(o)?(u&&console.warn("Unsupported prop change: options.".concat(o," is not a mutable property.")),a):u?ve(ve({},a||{}),{},_e({},o,e[o])):a},null):null},ke="Invalid prop `stripe` supplied to `Elements`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.",be=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ke;if(e===null||dt(e))return e;throw new Error(r)},mt=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ke;if(pt(e))return{tag:"async",stripePromise:Promise.resolve(e).then(function(a){return be(a,r)})};var n=be(e,r);return n===null?{tag:"empty"}:{tag:"sync",stripe:n}},ht=function(e){!e||!e._registerWrapper||!e.registerAppInfo||(e._registerWrapper({name:"react-stripe-js",version:"5.6.0"}),e.registerAppInfo({name:"react-stripe-js",version:"5.6.0",url:"https://stripe.com/docs/stripe-js/react"}))},K=f.createContext(null);K.displayName="ElementsContext";var Re=function(e,r){if(!e)throw new Error("Could not find Elements context; You need to wrap the part of your app that ".concat(r," in an <Elements> provider."));return e},Oe=function(e){var r=e.stripe,n=e.options,a=e.children,o=f.useMemo(function(){return mt(r)},[r]),u=f.useState(function(){return{stripe:o.tag==="sync"?o.stripe:null,elements:o.tag==="sync"?o.stripe.elements(n):null}}),p=we(u,2),i=p[0],h=p[1];f.useEffect(function(){var l=!0,w=function(k){h(function(T){return T.stripe?T:{stripe:k,elements:k.elements(n)}})};return o.tag==="async"&&!i.stripe?o.stripePromise.then(function(R){R&&l&&w(R)}):o.tag==="sync"&&!i.stripe&&w(o.stripe),function(){l=!1}},[o,i,n]);var g=ie(r);f.useEffect(function(){g!==null&&g!==r&&console.warn("Unsupported prop change on Elements: You cannot change the `stripe` prop after setting it.")},[g,r]);var m=ie(n);return f.useEffect(function(){if(i.elements){var l=Pe(n,m,["clientSecret","fonts"]);l&&i.elements.update(l)}},[n,m,i.elements]),f.useEffect(function(){ht(i.stripe)},[i.stripe]),f.createElement(K.Provider,{value:i},a)};Oe.propTypes={stripe:d.any,options:d.object};var yt=function(e){var r=f.useContext(K);return Re(r,e)},vt=function(){var e=yt("calls useElements()"),r=e.elements;return r};d.func.isRequired;var Te=f.createContext(null);Te.displayName="CheckoutContext";d.any,d.shape({clientSecret:d.oneOfType([d.string,d.instanceOf(Promise)]).isRequired,elementsOptions:d.object}).isRequired;var ce=function(e){var r=f.useContext(Te),n=f.useContext(K);if(r){if(n)throw new Error("You cannot wrap the part of your app that ".concat(e," in both <CheckoutProvider> and <Elements> providers."));return r}else return Re(n,e)},gt=["mode"],xt=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},N=function(e,r){var n="".concat(xt(e),"Element"),a=function(i){var h=i.id,g=i.className,m=i.options,l=m===void 0?{}:m,w=i.onBlur,R=i.onFocus,k=i.onReady,T=i.onChange,x=i.onEscape,z=i.onClick,L=i.onLoadError,M=i.onLoaderStart,P=i.onNetworksChange,U=i.onConfirm,$=i.onCancel,B=i.onShippingAddressChange,X=i.onShippingRateChange,H=i.onSavedPaymentMethodRemove,Q=i.onSavedPaymentMethodUpdate,c=ce("mounts <".concat(n,">")),j="elements"in c?c.elements:null,y="checkoutState"in c?c.checkoutState:null,S=y?.type==="success"||y?.type==="loading"?y.sdk:null,D=f.useState(null),q=we(D,2),v=q[0],Ae=q[1],O=f.useRef(null),Z=f.useRef(null);E(v,"blur",w),E(v,"focus",R),E(v,"escape",x),E(v,"click",z),E(v,"loaderror",L),E(v,"loaderstart",M),E(v,"networkschange",P),E(v,"confirm",U),E(v,"cancel",$),E(v,"shippingaddresschange",B),E(v,"shippingratechange",X),E(v,"savedpaymentmethodremove",H),E(v,"savedpaymentmethodupdate",Q),E(v,"change",T);var ee;k&&(e==="expressCheckout"?ee=k:ee=function(){k(v)}),E(v,"ready",ee),f.useLayoutEffect(function(){if(O.current===null&&Z.current!==null&&(j||S)){var b=null;if(S)switch(e){case"paymentForm":b=S.createPaymentFormElement(l);break;case"payment":b=S.createPaymentElement(l);break;case"address":if("mode"in l){var ue=l.mode,pe=ot(l,gt);if(ue==="shipping")b=S.createShippingAddressElement(pe);else if(ue==="billing")b=S.createBillingAddressElement(pe);else throw new Error("Invalid options.mode. mode must be 'billing' or 'shipping'.")}else throw new Error("You must supply options.mode. mode must be 'billing' or 'shipping'.");break;case"expressCheckout":b=S.createExpressCheckoutElement(l);break;case"currencySelector":b=S.createCurrencySelectorElement();break;case"taxId":b=S.createTaxIdElement(l);break;default:throw new Error("Invalid Element type ".concat(n,". You must use either the <PaymentElement />, <AddressElement options={{mode: 'shipping'}} />, <AddressElement options={{mode: 'billing'}} />, or <ExpressCheckoutElement />."))}else j&&(b=j.create(e,l));O.current=b,Ae(b),b&&b.mount(Z.current)}},[j,S,l]);var le=ie(l);return f.useEffect(function(){if(O.current){var b=Pe(l,le,["paymentRequest"]);b&&"update"in O.current&&O.current.update(b)}},[l,le]),f.useLayoutEffect(function(){return function(){if(O.current&&typeof O.current.destroy=="function")try{O.current.destroy(),O.current=null}catch{}}},[]),f.createElement("div",{id:h,className:g,ref:Z})},o=function(i){ce("mounts <".concat(n,">"));var h=i.id,g=i.className;return f.createElement("div",{id:h,className:g})},u=r?o:a;return u.propTypes={id:d.string,className:d.string,onChange:d.func,onBlur:d.func,onFocus:d.func,onReady:d.func,onEscape:d.func,onClick:d.func,onLoadError:d.func,onLoaderStart:d.func,onNetworksChange:d.func,onConfirm:d.func,onCancel:d.func,onShippingAddressChange:d.func,onShippingRateChange:d.func,onSavedPaymentMethodRemove:d.func,onSavedPaymentMethodUpdate:d.func,options:d.object},u.displayName=n,u.__elementType=e,u},_=typeof window>"u",bt=f.createContext(null);bt.displayName="EmbeddedCheckoutProviderContext";var jt=function(){var e=ce("calls useStripe()"),r=e.stripe;return r};N("auBankAccount",_);N("card",_);N("cardNumber",_);N("cardExpiry",_);N("cardCvc",_);N("iban",_);var St=N("payment",_);N("expressCheckout",_);N("paymentRequestButton",_);N("linkAuthentication",_);N("address",_);N("shippingAddress",_);N("paymentMethodMessaging",_);N("taxId",_);const Et=({clientSecret:t,onSuccess:e})=>{const{t:r}=je(),n=jt(),a=vt(),[o,u]=C.useState(null),[p,i]=C.useState(!1),h=async g=>{if(g.preventDefault(),!n||!a)return;i(!0);const{error:m,paymentIntent:l}=await n.confirmPayment({elements:a,redirect:"if_required"});m?u(m.message):l&&l.status==="succeeded"?(u(r("payment_success")),e(l.id)):u(r("unexpected_error")),i(!1)};return s.jsxs("form",{onSubmit:h,className:"space-y-6 mt-6",children:[s.jsx("div",{className:"p-4 border border-gray-200 rounded-lg bg-white",children:s.jsx(St,{})}),o&&s.jsx("div",{className:"text-red-500 text-sm bg-red-50 p-2 rounded",children:o}),s.jsx(oe,{disabled:p||!n||!a,className:"w-full bg-coffee-dark hover:bg-gold text-white py-6 text-lg uppercase tracking-widest font-bold",children:r(p?"processing":"secure_pay_now")}),s.jsxs("div",{className:"flex justify-center items-center gap-2 text-xs text-gray-400",children:[s.jsx(Be,{size:12})," ",r("secured_by")]})]})},At=()=>{const{t}=je(),{cartItems:e,getCartTotal:r,clearCart:n}=Le(),{user:a}=Ue(),o=qe(),u=Fe(),[p,i]=C.useState(1),[h,g]=C.useState({email:a?.email||"",phone:""}),[m,l]=C.useState({street:"",city:"",country:"France",postal_code:""}),[w,R]=C.useState(""),[k,T]=C.useState(null),[x,z]=C.useState({subtotal:0,tax:0,shipping:0,total:0,discount:0}),[L,M]=C.useState(""),[P,U]=C.useState(null),[$,B]=C.useState("");C.useEffect(()=>{o?.stripe_public_key&&et(o.stripe_public_key).then(T)},[o]),C.useEffect(()=>{const c=r(),j=.2,y=c>100?0:15;let S=0;P&&(P.discount_type==="percentage"?S=c*P.value/100:S=P.value);const D=Math.max(0,c-S),q=D*j,v=Math.max(0,D+q+y);z({subtotal:c,tax:q,shipping:y,discount:S,total:v})},[e,r,P]);const X=async()=>{B("");try{const j=await te.post("https://api.yemenimarket.fr//api/coupons/validate",{code:L,cartTotal:x.subtotal});U(j.data),re.success(t("coupon_applied"))}catch(c){B(c.response?.data?.error||t("invalid_coupon")),U(null)}};C.useEffect(()=>{e.length===0&&u("/products")},[e,u]),C.useEffect(()=>{p===2&&!w&&te.post("https://api.yemenimarket.fr//api/create-payment-intent",{items:e,shipping:x.shipping}).then(j=>{R(j.data.clientSecret)}).catch(j=>console.error("Error creating payment intent",j))},[p,e,w,x.shipping]);const H=c=>{c.preventDefault(),i(2),window.scrollTo(0,0)},Q=async c=>{try{const j={...m,email:h.email,phone:h.phone};await te.post("http://localhost:5000/api/orders",{user_id:a?.id||null,items:e.map(y=>({product_id:y.id,variant_id:y.variant?.id,quantity:y.quantity,price:y.variant?y.variant.price:y.price,name:y.name})),total_price:x.total,tax_total:x.tax,shipping_cost:x.shipping,shipping_address:JSON.stringify(j),payment_intent_id:c,email:h.email,phone:h.phone}),n(),re.success(t("order_success_msg",{email:h.email})),u("/")}catch(j){console.error("Failed to save order",j),re.error(t("payment_success_order_fail"))}};return s.jsxs("div",{className:"min-h-screen bg-gray-50 font-sans",children:[s.jsx(We,{}),s.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-12",children:[s.jsxs("div",{className:"flex flex-col md:flex-row justify-center items-center mb-12 space-y-4 md:space-y-0 text-sm tracking-widest uppercase",children:[s.jsxs("div",{className:`flex items - center gap - 2 ${p>=1?"text-coffee-dark font-bold":"text-gray-400"} `,children:[s.jsx("span",{className:"w-6 h-6 rounded-full border border-current flex items-center justify-center",children:"1"})," ",t("step_details")]}),s.jsx("div",{className:"w-12 h-px bg-gray-300 mx-4"}),s.jsxs("div",{className:`flex items - center gap - 2 ${p>=2?"text-coffee-dark font-bold":"text-gray-400"} `,children:[s.jsx("span",{className:"w-6 h-6 rounded-full border border-current flex items-center justify-center",children:"2"})," ",t("step_payment")]})]}),s.jsxs("div",{className:"lg:grid lg:grid-cols-12 lg:gap-x-12",children:[s.jsx("div",{className:"lg:col-span-7",children:s.jsxs("div",{className:"bg-white p-8 rounded-sm shadow-sm border border-gray-100",children:[p===1&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("h2",{className:"text-2xl font-serif font-bold text-coffee-dark flex items-center gap-3",children:[s.jsx(Me,{className:"text-gold"})," ",t("contact_shipping")]}),s.jsxs("form",{onSubmit:H,className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold uppercase text-gray-500 mb-1",children:t("email_address")}),s.jsx(A,{type:"email",className:"bg-gray-50 border-gray-200 h-12",placeholder:"you@example.com",required:!0,value:h.email,onChange:c=>g({...h,email:c.target.value})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold uppercase text-gray-500 mb-1",children:t("phone_number")}),s.jsx(A,{type:"tel",className:"bg-gray-50 border-gray-200 h-12",placeholder:"+33 6 12 34 56 78",required:!0,value:h.phone,onChange:c=>g({...h,phone:c.target.value})})]})]}),s.jsx("hr",{className:"border-gray-100 my-4"}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold uppercase text-gray-500 mb-1",children:t("street_address")}),s.jsx(A,{className:"bg-gray-50 border-gray-200 h-12",placeholder:"123 Luxury Ave",required:!0,value:m.street,onChange:c=>l({...m,street:c.target.value})})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold uppercase text-gray-500 mb-1",children:t("city")}),s.jsx(A,{className:"bg-gray-50 border-gray-200 h-12",placeholder:"Paris",required:!0,value:m.city,onChange:c=>l({...m,city:c.target.value})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold uppercase text-gray-500 mb-1",children:t("postal_code")}),s.jsx(A,{className:"bg-gray-50 border-gray-200 h-12",placeholder:"75001",required:!0,value:m.postal_code,onChange:c=>l({...m,postal_code:c.target.value})})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold uppercase text-gray-500 mb-1",children:t("country")}),s.jsx(A,{className:"bg-gray-50 border-gray-200 h-12",placeholder:"France",required:!0,value:m.country,onChange:c=>l({...m,country:c.target.value})})]}),s.jsx(oe,{type:"submit",className:"w-full mt-6 bg-coffee text-white hover:bg-gold uppercase tracking-widest h-12 font-bold transition-all",children:t("continue_payment")})]})]}),p===2&&w&&k&&s.jsxs("div",{className:"w-full",children:[s.jsxs("h2",{className:"text-2xl font-serif font-bold text-coffee-dark flex items-center gap-3 mb-6",children:[s.jsx($e,{className:"text-gold"})," ",t("secure_payment")]}),s.jsx(Oe,{stripe:k,options:{clientSecret:w},children:s.jsx(Et,{clientSecret:w,onSuccess:Q})}),s.jsx("button",{onClick:()=>i(1),className:"mt-4 text-xs text-gray-400 underline hover:text-gold",children:t("edit_contact_shipping")})]})]})}),s.jsx("div",{className:"lg:col-span-5 mt-8 lg:mt-0",children:s.jsxs("div",{className:"bg-[#F9F7F5] p-8 rounded-sm sticky top-24 border border-gray-100",children:[s.jsx("h3",{className:"font-serif font-bold text-lg text-coffee-dark mb-6 pb-4 border-b border-gray-200",children:t("order_summary")}),s.jsx("div",{className:"space-y-4 mb-6 max-h-64 overflow-y-auto pr-2 custom-scrollbar",children:e.map(c=>s.jsxs("div",{className:"flex gap-4",children:[s.jsx("div",{className:"h-16 w-16 bg-white rounded-md overflow-hidden flex-shrink-0 border border-gray-200",children:s.jsx("img",{src:c.imageUrl,className:"h-full w-full object-cover"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"text-sm font-medium text-coffee-dark",children:c.name}),s.jsxs("p",{className:"text-xs text-gray-500",children:[t("qty_label"),c.quantity]})]}),s.jsx("div",{className:"text-sm font-medium text-coffee-dark",children:t("price_with_currency",{amount:((c.variant?c.variant.price:c.price)*c.quantity).toFixed(2)})})]},c.id))}),s.jsxs("div",{className:"border-t border-gray-200 pt-4 space-y-2",children:[s.jsxs("div",{className:"flex justify-between text-sm text-gray-600",children:[s.jsx("span",{children:t("subtotal")}),s.jsx("span",{children:t("price_with_currency",{amount:x.subtotal.toFixed(2)})})]}),s.jsxs("div",{className:"flex justify-between text-sm text-gray-600",children:[s.jsx("span",{children:t("shipping")}),x.shipping===0?s.jsx("span",{className:"text-green-700 font-medium",children:t("free")}):s.jsx("span",{children:t("price_with_currency",{amount:x.shipping.toFixed(2)})})]}),s.jsxs("div",{className:"flex justify-between text-sm text-gray-600",children:[s.jsxs("span",{children:[t("tax")," (20%)"]}),s.jsx("span",{children:t("price_with_currency",{amount:x.tax.toFixed(2)})})]}),P&&s.jsxs("div",{className:"flex justify-between text-sm text-green-700 font-bold bg-green-50 p-2 rounded",children:[s.jsx("span",{children:t("discount_label",{code:P.code})}),s.jsxs("span",{children:["-",t("price_with_currency",{amount:x.discount.toFixed(2)})]})]})]}),s.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[s.jsxs("div",{className:"flex gap-2",children:[s.jsx(A,{placeholder:t("coupon_placeholder"),className:"bg-white h-10 text-sm",value:L,onChange:c=>M(c.target.value),disabled:!!P}),s.jsx(oe,{variant:"outline",className:"h-10 px-4 border-gray-200 text-gray-600 hover:text-gold hover:border-gold",onClick:X,disabled:!L||!!P,children:t("apply_coupon")})]}),$&&s.jsx("p",{className:"text-xs text-red-500 mt-2",children:$}),P&&s.jsx("button",{onClick:()=>{U(null),M("")},className:"text-xs text-gray-400 underline mt-2 hover:text-red-500",children:t("remove_coupon")})]}),s.jsxs("div",{className:"border-t border-gray-200 pt-4 mt-4 flex justify-between items-center",children:[s.jsx("span",{className:"font-serif font-bold text-xl text-coffee-dark",children:t("total")}),s.jsx("span",{className:"font-bold text-xl text-gold",children:t("price_with_currency",{amount:x.total.toFixed(2)})})]})]})})]})]})]})};export{At as default};
